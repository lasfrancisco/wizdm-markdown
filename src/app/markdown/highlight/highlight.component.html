
<!-- Loops on highligh tokens -->
<ng-container *ngFor="let token of tokens">

  <!-- Renders plain strings as text nodes -->
  <ng-container *ngIf="isString(token);else spanToken">{{ token }}</ng-container>

  <!-- Spans the token recurring down the tree with the proper highligh class otherwise -->
  <ng-template #spanToken>
    <span [class]="'token '+token.type" [wm-highlight]="token.content"></span>
  </ng-template>

</ng-container>
